<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chem Academy</title>
    <script src="javascript/model3d.js"></script>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <h1 id = "title">Chem Academy</h1>
    <div id = "ptable">
        
    </div>
    <script>
    const jsondata = fetch("data/info.json").then((response) => response.json());
    let data = null;
    const maxval = 18;
    let vshellimg = {

    }
    async function load(){
        data = await jsondata;
        for(let i = 1; i <= 18; i++){
            if(i > 8 && i < 18){
                continue;
            }
            vshellimg[i] = new Image();
            vshellimg[i].src = "images/Shell" + i + ".svg";
            vshellimg[i].setAttribute("class", "shell");
            vshellimg[i].setAttribute("alt", "Shell" + i);
        }
        for(let  v of data.elements){
            await addElement(v);
        }
    }
    

    async function addElement(v){
        const element = document.createElement("div");
        element.setAttribute("class", "element");
        element.setAttribute("id", v.name);
        element.style.gridColumnStart = v.xpos;
        element.style.gridRowStart = v.ypos;
        element.innerHTML = "<p> " + v.symbol+"</p>";
        element.onclick = function(){
            let elemet = this.id;
            let elobject = data.elements.find((element) => element.name == elemet);
         }
        let val = v.shells[v.shells.length - 1];
        let img = vshellimg[val];
        element.appendChild(cloneImage(img));
        document.getElementById("ptable").appendChild(element);

    }
    function cloneImage(img){
        let i = new Image();
        i.src = img.src;
        i.setAttribute("class", "shell");
        i.setAttribute("alt", img.alt);
        return i;
    }
    load();
    </script>
<script>
    //when press enter on chatInputText, delete the text and add the text to chatTextP
    document.getElementById("chatInputText").addEventListener("keyup", function(event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            document.getElementById("chatTextP").innerHTML = document.getElementById("chatInputText").value + "<br> <br> <br>";
            document.getElementById("chatInputText").value = "";
        }
    });
    //add event listener, if popOut is not clicked, hide it
    document.addEventListener("click", function(event) {
        if (!event.target.classList.contains("modal")) {
            document.getElementById("popOut").style.display = "none";
        }
    });
</script>
</body>
</html>